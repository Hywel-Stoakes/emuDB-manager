{"version":3,"file":"database-detail.component.js","sourceRoot":"","sources":["../../../../../../../home/markus/code/emuDB-manager/tmp/broccoli_type_script_compiler-input_base_path-DPzWUHIL.tmp/0/src/app/project/database-detail/database-detail.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component, OnInit, OnDestroy} from \"@angular/core\";\nimport {DatabaseInfo} from \"../../types/database-info\";\nimport {ProjectDataService} from \"../../project-data.service\";\nimport {ActivatedRoute} from \"@angular/router\";\nimport {Subscription} from \"rxjs/Rx\";\n\ntype State = 'BundleLists' | 'Session' | 'Rename';\n\n@Component({\n\tmoduleId: module.id,\n\tselector: 'emudbmanager-database-detail',\n\ttemplateUrl: 'database-detail.component.html',\n\tstyleUrls: ['database-detail.component.css']\n})\nexport class DatabaseDetailComponent implements OnInit,OnDestroy {\n\tprivate database:DatabaseInfo;\n\tprivate newName:string = '';\n\tprivate renameError:string = '';\n\tprivate renameSuccess:string = '';\n\tprivate subDatabase:Subscription;\n\tprivate subParams:Subscription;\n\tprivate subWebAppLink:Subscription;\n\tprivate state:State = 'BundleLists';\n\tprivate webAppLink:string = '';\n\n\tconstructor(private projectDataService:ProjectDataService, private route:ActivatedRoute) {\n\t}\n\n\tngOnInit() {\n\t\tthis.subParams = this.route.params.subscribe(params => {\n\t\t\tthis.subDatabase = this.projectDataService.getDatabase(params['name']).subscribe(nextDatabase => {\n\t\t\t\tthis.database = nextDatabase;\n\t\t\t});\n\t\t\tthis.subWebAppLink = this.projectDataService.getEmuWebAppURL(params['name']).subscribe(nextLink => {\n\t\t\t\tthis.webAppLink = nextLink;\n\t\t\t});\n\t\t})\n\t}\n\n\tngOnDestroy() {\n\t\tif (this.subParams) {\n\t\t\tthis.subParams.unsubscribe();\n\t\t}\n\t\tif (this.subDatabase) {\n\t\t\tthis.subDatabase.unsubscribe();\n\t\t}\n\t\tif (this.subWebAppLink) {\n\t\t\tthis.subWebAppLink.unsubscribe();\n\t\t}\n\t}\n\n\tprivate renameDatabase () {\n\t\tthis.renameError = '';\n\t\tthis.renameSuccess = '';\n\n\t\tif (this.database.name === this.newName) {\n\t\t\tthis.renameSuccess = 'That is already the databaseâ€™s name.';\n\t\t\treturn;\n\t\t}\n\n\t\tthis.projectDataService.renameDatabase(this.database.name, this.newName).subscribe (next => {\n\t\t\tthis.renameSuccess = 'Successfully renamed';\n\t\t\tthis.projectDataService.fetchData();\n\n\t\t\tif (this.subDatabase) {\n\t\t\t\tthis.subDatabase.unsubscribe();\n\t\t\t}\n\t\t\tif (this.subWebAppLink) {\n\t\t\t\tthis.subWebAppLink.unsubscribe();\n\t\t\t}\n\t\t\tthis.subDatabase = this.projectDataService.getDatabase(this.newName).subscribe(nextDatabase => {\n\t\t\t\tthis.database = nextDatabase;\n\t\t\t});\n\t\t\tthis.subWebAppLink = this.projectDataService.getEmuWebAppURL(this.newName).subscribe(nextLink => {\n\t\t\t\tthis.webAppLink = nextLink;\n\t\t\t});\n\t\t}, error => {\n\t\t\tthis.renameError = error.message;\n\t\t});\n\t}\n}\n"]}