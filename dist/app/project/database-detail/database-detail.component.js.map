{"version":3,"file":"database-detail.component.js","sourceRoot":"","sources":["../../../../../../../home/markus/code/emuDB-manager/tmp/broccoli_type_script_compiler-input_base_path-UJZNJA0k.tmp/0/src/app/project/database-detail/database-detail.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component, OnInit, OnDestroy} from \"@angular/core\";\nimport {DatabaseInfo} from \"../../types/database-info\";\nimport {ProjectDataService} from \"../../project-data.service\";\nimport {ActivatedRoute} from \"@angular/router\";\nimport {Subscription} from \"rxjs/Rx\";\nimport {DownloadInfo} from \"../../types/download-info\";\nimport {DownloadTarget} from \"../../types/download-target\";\n\ntype State = 'BundleLists' | 'Session' | 'Download' | 'Rename' | 'Config';\n\n@Component({\n\tmoduleId: module.id,\n\tselector: 'emudbmanager-database-detail',\n\ttemplateUrl: 'database-detail.component.html',\n\tstyleUrls: ['database-detail.component.css']\n})\nexport class DatabaseDetailComponent implements OnInit,OnDestroy {\n\tprivate commitList; //@todo add type\n\tprivate configComments: boolean;\n\tprivate configFinishedEditing: boolean;\n\tprivate createArchiveCurrent: string = '';\n\tprivate createArchiveError: string = '';\n\tprivate database: DatabaseInfo;\n\tprivate downloadList: DownloadInfo[] = [];\n\tprivate newName: string = '';\n\tprivate renameError: string = '';\n\tprivate renameSuccess: string = '';\n\tprivate saveConfigError: string = '';\n\tprivate saveConfigSuccess: string = '';\n\tprivate subCommitList: Subscription;\n\tprivate subDatabase: Subscription;\n\tprivate subDownloadList: Subscription;\n\tprivate subParams: Subscription;\n\tprivate subTagList: Subscription;\n\tprivate subWebAppLink: Subscription;\n\tprivate state: State = 'BundleLists';\n\tprivate tableFormat = [\n\t\t{type: 'string', heading: 'Name', value: x => x.name},\n\t\t{type: 'string', heading: 'Bundles', value: x => x.bundles.length}\n\t];\n\tprivate tagList: string[] = [];\n\tprivate webAppLink: string = '';\n\n\tconstructor(private projectDataService: ProjectDataService, private route: ActivatedRoute) {\n\t}\n\n\tngOnInit() {\n\t\tthis.subParams = this.route.params.subscribe(params => {\n\t\t\tthis.unsubscribe(false);\n\t\t\tthis.subscribe(params['name']);\n\t\t})\n\t}\n\n\tngOnDestroy() {\n\t\tthis.unsubscribe(true);\n\t}\n\n\tprivate subscribe(databaseName: string) {\n\t\tthis.subDatabase = this.projectDataService.getDatabase(databaseName).subscribe(nextDatabase => {\n\t\t\tthis.database = nextDatabase;\n\t\t\tthis.configComments = this.savedConfigComments();\n\t\t\tthis.configFinishedEditing = this.savedConfigFinishedEditing();\n\t\t});\n\n\t\tthis.subCommitList = this.projectDataService.getCommitList(databaseName).subscribe(nextCommitList => {\n\t\t\tthis.commitList = nextCommitList;\n\t\t});\n\t\tthis.subDownloadList = this.projectDataService.getDownloads(databaseName).subscribe((nextDownloadList: DownloadInfo[]) => {\n\t\t\tthis.downloadList = nextDownloadList;\n\t\t});\n\t\tthis.subTagList = this.projectDataService.getTagList(databaseName).subscribe(nextTagList => {\n\t\t\tthis.tagList = nextTagList;\n\t\t});\n\t\tthis.subWebAppLink = this.projectDataService.getEmuWebAppURL(databaseName).subscribe(nextLink => {\n\t\t\tthis.webAppLink = nextLink;\n\t\t});\n\t}\n\n\tprivate unsubscribe(unsubscribeParams) {\n\t\tif (this.subParams && unsubscribeParams) {\n\t\t\tthis.subParams.unsubscribe();\n\t\t}\n\n\t\tif (this.subDatabase) {\n\t\t\tthis.subDatabase.unsubscribe();\n\t\t}\n\n\t\tif (this.subDownloadList) {\n\t\t\tthis.subDatabase.unsubscribe();\n\t\t}\n\t\tif (this.subCommitList) {\n\t\t\tthis.subCommitList.unsubscribe();\n\t\t}\n\t\tif (this.subTagList) {\n\t\t\tthis.subTagList.unsubscribe();\n\t\t}\n\t\tif (this.subWebAppLink) {\n\t\t\tthis.subWebAppLink.unsubscribe();\n\t\t}\n\t}\n\n\tprivate editTag(commit) {\n\t\tcommit.editingTag = !commit.editingTag;\n\t}\n\n\tprivate countTags() {\n\t\tlet count = this.tagList.length;\n\t\treturn count;\n\t}\n\n\tprivate countDownloads() {\n\t\tlet count = this.downloadList.length;\n\t\treturn count;\n\t}\n\n\tprivate countCommits() {\n\t\tlet count = 0;\n\n\t\tif (this.commitList) {\n\t\t\tfor (let i = 0; i < this.commitList.length; ++i) {\n\t\t\t\tfor (let j = 0; j < this.commitList[i].days.length; ++j) {\n\t\t\t\t\tcount += this.commitList[i].days[j].commits.length;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn count;\n\t}\n\n\tprivate createArchive(treeish: string) {\n\t\tthis.projectDataService.createArchive(this.database.name, treeish).subscribe(next => {\n\t\t\tthis.createArchiveCurrent = treeish;\n\t\t}, error => {\n\t\t\tthis.createArchiveError = 'Error while preparing';\n\t\t});\n\t}\n\n\tprivate saveTag(commit) {\n\t\tcommit.saveTagError = '';\n\t\tcommit.saveTagSuccess = '';\n\n\t\tif (commit.tagLabel === '') {\n\t\t\tcommit.saveTagError = 'Empty labels are not allowed.';\n\t\t\treturn;\n\t\t}\n\n\t\tthis.projectDataService.addTag(this.database.name, commit.commitID, commit.tagLabel).subscribe(next => {\n\t\t\tcommit.saveTagSuccess = 'Successfully created tag: ' + commit.tagLabel;\n\t\t\tcommit.tagLabel = '';\n\t\t\tcommit.editingTag = false;\n\n\t\t\tif (this.subTagList) {\n\t\t\t\tthis.subTagList.unsubscribe();\n\t\t\t}\n\n\t\t\tthis.subTagList = this.projectDataService.getTagList(this.database.name).subscribe(nextTagList => {\n\t\t\t\tthis.tagList = nextTagList;\n\t\t\t});\n\t\t}, error => {\n\t\t\tcommit.saveTagError = error.message;\n\t\t});\n\t}\n\n\tprivate saveConfiguration() {\n\t\tthis.saveConfigError = '';\n\t\tthis.saveConfigSuccess = '';\n\n\t\tif (!this.hasUnsavedChanges()) {\n\t\t\tthis.saveConfigError = 'No changes to be saved.';\n\t\t\treturn;\n\t\t}\n\n\t\tthis.projectDataService.setDatabaseConfiguration(this.database.name, this.configComments, this.configFinishedEditing)\n\t\t\t.subscribe(next => {\n\t\t\t\tthis.saveConfigSuccess = 'Successfully stored configuration' +\n\t\t\t\t\t' changes.';\n\t\t\t\tthis.projectDataService.fetchData();\n\t\t\t}, error => {\n\t\t\t\tthis.saveConfigError = error.message;\n\t\t\t});\n\t}\n\n\tprivate renameDatabase() {\n\t\tthis.renameError = '';\n\t\tthis.renameSuccess = '';\n\n\t\tif (this.database.name === this.newName) {\n\t\t\tthis.renameSuccess = 'That is already the database’s name.';\n\t\t\treturn;\n\t\t}\n\n\t\tthis.projectDataService.renameDatabase(this.database.name, this.newName).subscribe(next => {\n\t\t\tthis.renameSuccess = 'Successfully renamed';\n\t\t\tthis.projectDataService.fetchData();\n\n\t\t\tthis.unsubscribe(false);\n\t\t\tthis.subscribe(this.newName);\n\t\t}, error => {\n\t\t\tthis.renameError = error.message;\n\t\t});\n\t}\n\n\tprivate hasUnsavedChanges(): boolean {\n\t\tif (this.savedConfigComments() !== this.configComments) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this.savedConfigFinishedEditing() !== this.configFinishedEditing) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate savedConfigComments(): boolean {\n\t\treturn this.projectDataService.getConfigComments(this.database);\n\t}\n\n\tprivate savedConfigFinishedEditing(): boolean {\n\t\treturn this.projectDataService.getConfigFinishedEditing(this.database);\n\t}\n\n\tprivate downloadTarget(treeish: string): DownloadTarget {\n\t\treturn this.projectDataService.getDownloadTarget(this.database.name, treeish);\n\t}\n\n\tprivate downloadOptions(treeish: string): string[] {\n\t\treturn Object.keys(this.downloadTarget(treeish).options);\n\t}\n\n\tprivate transformCommitMessage(message: string):string {\n\t\tlet trigger = 'EMU-webApp auto save commit; ';\n\n\t\tif (message.substr(0, trigger.length) === trigger) {\n\t\t\tlet matches = message.match(/User: ([^;]*);.*Bundle: (.*)/);\n\t\t\tif (matches.length === 3) {\n\t\t\t\treturn 'Bundle ' + matches[2] + ' edited by ' + matches[1];\n\t\t\t}\n\t\t}\n\n\t\treturn message;\n\t}\n\n\t/**\n\t * Taken from MDN.\n\t *\n\t * The precision parameter works same way as PHP and Excel whereby a\n\t * positive 1 would round to 1 decimal place and -1 would round to the tens.\n\t */\n\tprivate round (number:number, precision:number) {\n\t\tvar factor = Math.pow(10, precision);\n\t\tvar tempNumber = number * factor;\n\t\tvar roundedTempNumber = Math.round(tempNumber);\n\t\treturn roundedTempNumber / factor;\n\t};\n\n\tprivate displaySize (size: number): string {\n\t\tif (size > 1024**3) {\n\t\t\treturn this.round(size/1024**3, 1) + ' GiB';\n\t\t} else if (size > 1024**2) {\n\t\t\treturn this.round(size/1024**2, 1) + ' MiB';\n\t\t} else if (size > 1024) {\n\t\t\treturn this.round(size/1024, 1) + 'KiB';\n\t\t} else {\n\t\t\treturn size + ' B';\n\t\t}\n\t}\n}\n"]}