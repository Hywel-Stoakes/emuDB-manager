{"version":3,"file":"bundle-list-detail.component.js","sourceRoot":"","sources":["../../../home/markus/code/emuDB-manager/tmp/broccoli_type_script_compiler-input_base_path-AqWygsMZ.tmp/0/src/app/project/bundle-list-detail/bundle-list-detail.component.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,qBAA2C,eAAe,CAAC,CAAA;AAE3D,uBAA6B,iBAAiB,CAAC,CAAA;AAC/C,qCAAiC,4BAA4B,CAAC,CAAA;AAY9D;IAgBC,mCAAoB,kBAAqC,EACrC,KAAoB;QADpB,uBAAkB,GAAlB,kBAAkB,CAAmB;QACrC,UAAK,GAAL,KAAK,CAAe;QAhBhC,eAAU,GAAoB,EAAE,CAAC;QAEjC,qBAAgB,GAAoB,EAAE,CAAC;QACvC,aAAQ,GAAU,EAAE,CAAC;QACrB,eAAU,GAAG;YACpB,SAAS,EAAE,KAAK;YAChB,YAAY,EAAE,EAAE;YAChB,cAAc,EAAE,EAAE;YAClB,OAAO,EAAE,EAAE;YACX,SAAS,EAAE,EAAE;SACb,CAAC;QACM,UAAK,GAAS,MAAM,CAAC;IAM7B,CAAC;IAED,4CAAQ,GAAR;QAAA,iBAsBC;QArBA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,UAAA,UAAU;YACtD,EAAE,CAAC,CAAC,OAAO,UAAU,CAAC,QAAQ,CAAC,KAAK,WAAW,CAAC,CAAC,CAAC;gBACjD,UAAU,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC;YAC3B,CAAC;YAED,KAAI,CAAC,aAAa,GAAG,KAAI,CAAC,kBAAkB,CAAC,aAAa,CACzD,UAAU,CAAC,UAAU,CAAC,EACtB,UAAU,CAAC,MAAM,CAAC,EAClB,UAAU,CAAC,QAAQ,CAAC,CACpB,CAAC,SAAS,CAAC,UAAA,cAAc;gBACzB,KAAI,CAAC,QAAQ,GAAG,UAAU,CAAC,UAAU,CAAC,CAAC;gBAEvC,KAAI,CAAC,UAAU,GAAG,cAAc,CAAC;gBACjC,KAAI,CAAC,UAAU,CAAC,OAAO,GAAG,cAAc,CAAC,IAAI,CAAC;gBAC9C,KAAI,CAAC,UAAU,CAAC,SAAS,GAAG,cAAc,CAAC,MAAM,CAAC;gBAClD,KAAI,CAAC,UAAU,GAAG,cAAc,CAAC,KAAK,CAAC;gBACvC,KAAI,CAAC,gBAAgB,GAAG,cAAc,CAAC,KAAK,CAAC,MAAM,CAAC,UAAA,OAAO;oBAC1D,MAAM,CAAC,OAAO,CAAC,OAAO,KAAK,EAAE,CAAC;gBAC/B,CAAC,CAAC,CAAC;YACJ,CAAC,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,+CAAW,GAAX;QACC,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;YACpB,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC;QAC9B,CAAC;IACF,CAAC;IAEO,iDAAa,GAArB;QAAA,iBAoCC;QAnCA,IAAI,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC;QACtC,IAAI,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC;QAC1C,IAAI,CAAC,cAAc,EAAE,CAAC;QAEtB,IAAI,CAAC,UAAU,CAAC,YAAY,GAAG,EAAE,CAAC;QAClC,IAAI,CAAC,UAAU,CAAC,cAAc,GAAG,EAAE,CAAC;QAEpC,IAAI,CAAC,kBAAkB,CAAC,UAAU,CACjC,IAAI,CAAC,QAAQ,EACb,IAAI,CAAC,UAAU,CAAC,IAAI,EACpB,IAAI,CAAC,UAAU,CAAC,MAAM,EACtB,OAAO,EAAE,SAAS,CAClB,CAAC,SAAS,CAAE,UAAA,IAAI;YAChB,KAAI,CAAC,UAAU,CAAC,cAAc,GAAG,sBAAsB,CAAC;YACxD,KAAI,CAAC,kBAAkB,CAAC,SAAS,EAAE,CAAC;YAEpC,EAAE,CAAC,CAAC,KAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBACxB,KAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;YAClC,CAAC;YACD,KAAI,CAAC,aAAa,GAAG,KAAI,CAAC,kBAAkB,CAAC,aAAa,CACzD,KAAI,CAAC,QAAQ,EACb,KAAI,CAAC,UAAU,CAAC,OAAO,EACvB,KAAI,CAAC,UAAU,CAAC,SAAS,CACzB,CAAC,SAAS,CAAC,UAAA,cAAc;gBACzB,KAAI,CAAC,UAAU,GAAG,cAAc,CAAC;gBACjC,KAAI,CAAC,UAAU,CAAC,OAAO,GAAG,cAAc,CAAC,IAAI,CAAC;gBAC9C,KAAI,CAAC,UAAU,CAAC,SAAS,GAAG,cAAc,CAAC,MAAM,CAAC;gBAClD,KAAI,CAAC,UAAU,GAAG,cAAc,CAAC,KAAK,CAAC;gBACvC,KAAI,CAAC,gBAAgB,GAAG,cAAc,CAAC,KAAK,CAAC,MAAM,CAAC,UAAA,OAAO;oBAC1D,MAAM,CAAC,OAAO,CAAC,OAAO,KAAK,EAAE,CAAC;gBAC/B,CAAC,CAAC,CAAC;YACJ,CAAC,CAAC,CAAC;QACJ,CAAC,EAAE,UAAA,KAAK;YACP,KAAI,CAAC,UAAU,CAAC,YAAY,GAAG,KAAK,CAAC,OAAO,CAAC;QAC9C,CAAC,CAAC,CAAC;IACJ,CAAC;IAEO,kDAAc,GAAtB;QACC,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC;YAC/B,IAAI,CAAC,UAAU,CAAC,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC;YAC/C,IAAI,CAAC,UAAU,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC;YACnD,IAAI,CAAC,UAAU,CAAC,SAAS,GAAG,KAAK,CAAC;QACnC,CAAC;QAAC,IAAI,CAAC,CAAC;YACP,IAAI,CAAC,UAAU,CAAC,SAAS,GAAG,IAAI,CAAC;QAClC,CAAC;IACF,CAAC;IAtGF;QAAC,gBAAS,CAAC;YACV,QAAQ,EAAE,MAAM,CAAC,EAAE;YACnB,QAAQ,EAAE,iCAAiC;YAC3C,WAAW,EAAE,mCAAmC;YAChD,SAAS,EAAE,CAAC,kCAAkC,CAAC;SAC/C,CAAC;;iCAAA;IAkGF,gCAAC;AAAD,CAAC,AAjGD,IAiGC;AAjGY,iCAAyB,4BAiGrC,CAAA","sourcesContent":["import {Component, OnInit, OnDestroy} from \"@angular/core\";\nimport {Subscription} from \"rxjs/Rx\";\nimport {ActivatedRoute} from \"@angular/router\";\nimport {ProjectDataService} from \"../../project-data.service\";\nimport {BundleListItem} from \"../../types/bundle-list-item\";\nimport {BundleList} from \"../../types/bundle-list\";\n\ntype State = 'Info' | 'AllBundles' | 'CommentedItems';\n\n@Component({\n\tmoduleId: module.id,\n\tselector: 'emudbmanager-bundle-list-detail',\n\ttemplateUrl: 'bundle-list-detail.component.html',\n\tstyleUrls: ['bundle-list-detail.component.css']\n})\nexport class BundleListDetailComponent implements OnInit,OnDestroy {\n\tprivate allBundles:BundleListItem[] = [];\n\tprivate bundleList:BundleList;\n\tprivate commentedBundles:BundleListItem[] = [];\n\tprivate database:string = '';\n\tprivate infoEditor = {\n\t\tisEditing: false,\n\t\tmessageError: '',\n\t\tmessageSuccess: '',\n\t\tnewName: '',\n\t\tnewStatus: ''\n\t};\n\tprivate state:State = 'Info';\n\tprivate subBundleList:Subscription;\n\tprivate subParams:Subscription;\n\n\tconstructor(private projectDataService:ProjectDataService,\n\t            private route:ActivatedRoute) {\n\t}\n\n\tngOnInit() {\n\t\tthis.subParams = this.route.params.subscribe(nextParams => {\n\t\t\tif (typeof nextParams['status'] === 'undefined') {\n\t\t\t\tnextParams['status'] = '';\n\t\t\t}\n\n\t\t\tthis.subBundleList = this.projectDataService.getBundleList(\n\t\t\t\tnextParams['database'],\n\t\t\t\tnextParams['name'],\n\t\t\t\tnextParams['status']\n\t\t\t).subscribe(nextBundleList => {\n\t\t\t\tthis.database = nextParams['database'];\n\n\t\t\t\tthis.bundleList = nextBundleList;\n\t\t\t\tthis.infoEditor.newName = nextBundleList.name;\n\t\t\t\tthis.infoEditor.newStatus = nextBundleList.status;\n\t\t\t\tthis.allBundles = nextBundleList.items;\n\t\t\t\tthis.commentedBundles = nextBundleList.items.filter(element => {\n\t\t\t\t\treturn element.comment !== '';\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\tngOnDestroy() {\n\t\tif (this.subParams) {\n\t\t\tthis.subParams.unsubscribe();\n\t\t}\n\t}\n\n\tprivate submitNewInfo () {\n\t\tlet newName = this.infoEditor.newName;\n\t\tlet newStatus = this.infoEditor.newStatus;\n\t\tthis.toggleEditInfo();\n\n\t\tthis.infoEditor.messageError = '';\n\t\tthis.infoEditor.messageSuccess = '';\n\n\t\tthis.projectDataService.editBundle(\n\t\t\tthis.database,\n\t\t\tthis.bundleList.name,\n\t\t\tthis.bundleList.status,\n\t\t\tnewName, newStatus\n\t\t).subscribe (next => {\n\t\t\tthis.infoEditor.messageSuccess = 'Successfully edited.';\n\t\t\tthis.projectDataService.fetchData();\n\n\t\t\tif (this.subBundleList) {\n\t\t\t\tthis.subBundleList.unsubscribe();\n\t\t\t}\n\t\t\tthis.subBundleList = this.projectDataService.getBundleList(\n\t\t\t\tthis.database,\n\t\t\t\tthis.infoEditor.newName,\n\t\t\t\tthis.infoEditor.newStatus\n\t\t\t).subscribe(nextBundleList => {\n\t\t\t\tthis.bundleList = nextBundleList;\n\t\t\t\tthis.infoEditor.newName = nextBundleList.name;\n\t\t\t\tthis.infoEditor.newStatus = nextBundleList.status;\n\t\t\t\tthis.allBundles = nextBundleList.items;\n\t\t\t\tthis.commentedBundles = nextBundleList.items.filter(element => {\n\t\t\t\t\treturn element.comment !== '';\n\t\t\t\t});\n\t\t\t});\n\t\t}, error => {\n\t\t\tthis.infoEditor.messageError = error.message;\n\t\t});\n\t}\n\n\tprivate toggleEditInfo () {\n\t\tif (this.infoEditor.isEditing) {\n\t\t\tthis.infoEditor.newName = this.bundleList.name;\n\t\t\tthis.infoEditor.newStatus = this.bundleList.status;\n\t\t\tthis.infoEditor.isEditing = false;\n\t\t} else {\n\t\t\tthis.infoEditor.isEditing = true;\n\t\t}\n\t}\n}\n"]}